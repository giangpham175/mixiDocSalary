<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tính Lương Bác Sĩ</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css">
</head>

<body>
  <div class="container">
    <!-- ---------------------------- -->
    <h1 class="mt-5 mb-3">Chức vụ nhân viên:</h1>
    <div class="input-group mb-3">
      <select id="jobRank" class="browser-default custom-select">
        <option value="1" selected>Giám Đốc</option>
        <option value="2">Phó Giám Đốc</option>
        <option value="3">Bác Sĩ Trưởng</option>
        <option value="4">Bác Sĩ</option>
        <option value="5">Y Tá</option>
        <option value="6">Thực Tập Sinh</option>
        <option value="7">Thử Việc</option>
        <option value="8">Part-time</option>
      </select>
    </div>

    <!-- ---------------------------- -->
    <h1 class="mt-5 mb-3">Số giờ làm việc:</h1>
    <div class="row">
      <div class="col-6">Số giờ làm việc ca trực <b>chính thức</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="mainTime" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Số giờ làm việc ca trực <b>hỗ trợ</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="supportTime" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Số giờ làm việc ca trực <b>part-time</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="partTime" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-3">Số giờ <b>trực thay bác sĩ khác</b>:</div>
      <div class="col-3 input-group mb-3">
        <input id="replacedTime" type="number" class="form-control">
      </div>

      <div class="col-3">Chức vụ của bác sĩ được trực thay:</div>
      <div class="col-3 input-group mb-3">
        <select id="jobRankReplaced" class="browser-default custom-select">
          <option value="1" selected>Giám Đốc</option>
          <option value="2">Phó Giám Đốc</option>
          <option value="3">Bác Sĩ Trưởng</option>
          <option value="4">Bác Sĩ</option>
          <option value="5">Y Tá</option>
          <option value="6">Thực Tập Sinh</option>
          <option value="7">Thử Việc</option>
          <option value="8">Part-time</option>
        </select>
      </div>
    </div>

    <!-- ---------------------------- -->
    <h1 class="mt-5 mb-3">Chi phí làm việc:</h1>
    <div class="row">
      <div class="col-6">Phí <b>thưởng</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="rewardMoney" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Phí <b>sửa xe</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="repairCarMoney" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Phí <b>viện phí cảnh sát</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="policeBillMoney" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Phí <b>trợ cấp</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="subsidizeMoney" type="number" class="form-control">
      </div>
    </div>

    <!-- ---------------------------- -->
    <button class="btn btn-primary btn-lg btn-block">Tính Lương</button>
    <p class="text-muted">Still coding... can not test... but result will be showed here</p>
    <!-- <p class="text-muted">Click chọn Tính lương để Tính lương thực nhận</p> -->
    <p id="result"></p>

    <div class="alert alert-primary" role="alert">
      Mô tả sẽ được cập nhật sau khi hoàn tất.
    </div>

  </div>

  <script>

    const btnElement = document.querySelector('button')
    const resultElement = document.querySelector('#result')

    btnElement.addEventListener('click', calculateSalary)

    function calculateSalary() {
      const mainTime = document.querySelector('#mainTime')
      const supportTime = document.querySelector('#supportTime')
      const partTime = document.querySelector('#partTime')
      const replacedTime = document.querySelector('#replacedTime')

      const rewardMoney = document.querySelector('#rewardMoney')
      const repairCarMoney = document.querySelector('#repairCarMoney')
      const policeBillMoney = document.querySelector('#policeBillMoney')
      const subsidizeMoney = document.querySelector('#subsidizeMoney')

      const jobRank = document.getElementById("jobRank").value
      const jobRankReplaced = document.getElementById("jobRankReplaced").value

      const hospitalFund = 0.9 // meaning 10%
      const job1Salary = 2250
      const job2Salary = 2250
      const job3Salary = 2250
      const job4Salary = 2000
      const job5Salary = 1500
      const job6Salary = 1250
      const job7Salary = 1000
      const job8Salary = 0

      let mainSalary = 0
      if (jobRank == 1) {
        mainSalary = job1Salary
      } else if (jobRank == 2) {
        mainSalary = job2Salary
      } else if (jobRank == 3) {
        mainSalary = job3Salary
      } else if (jobRank == 4) {
        mainSalary = job4Salary
      } else if (jobRank == 5) {
        mainSalary = job5Salary
      } else if (jobRank == 6) {
        mainSalary = job6Salary
      } else if (jobRank == 7) {
        mainSalary = job7Salary
      } else if (jobRank == 8) {
        mainSalary = job8Salary
      } else {
        mainSalary = 0
      }

      let replaceSalaryRecieved = 0
      if (jobRankReplaced == 1) {
        replaceSalaryRecieved = job1Salary
      } else if (jobRankReplaced == 2) {
        replaceSalaryRecieved = job2Salary
      } else if (jobRankReplaced == 3) {
        replaceSalaryRecieved = job3Salary
      } else if (jobRankReplaced == 4) {
        replaceSalaryRecieved = job4Salary
      } else if (jobRankReplaced == 5) {
        replaceSalaryRecieved = job5Salary
      } else if (jobRankReplaced == 6) {
        replaceSalaryRecieved = job6Salary
      } else if (jobRankReplaced == 7) {
        replaceSalaryRecieved = job7Salary
      } else if (jobRankReplaced == 8) {
        replaceSalaryRecieved = 0
      } else {
        replaceSalaryRecieved = 0
      }

      let temporarySalary = 0
      let supportSalary = 0
      let replacedSalary = 0
      let partTimeSalary = 0

      // luong tam tinh, chua cong tru cac khoan phi khac
      if (mainTime.value != null || mainTime.value != 0) {
        temporarySalary = mainSalary * mainTime.value
      }
      // luong ho tro
      if (supportTime.value != null || supportTime.value != 0) {
        supportSalary = mainSalary * supportTime.value / 2
      }
      // luong truc thay bac si khac
      if (replacedTime.value != null || replacedTime.value != 0) {
        replacedSalary = replacedTime.value * replaceSalaryRecieved
      }
      // luong truc part-time
      if (partTime.value != null || partTime.value != 0) {
        partTimeSalary = mainSalary * partTime.value
      }

      let salaryBefore = 0
      let salaryAfter = 0
      // luong tong cua so gio lam viec truoc khi trich quy
      salaryBefore = temporarySalary + supportSalary + replacedSalary + partTimeSalary
      // luong tong cua so gio lam viec sau khi trich quy
      salaryAfter = salaryBefore * hospitalFund

      // cong them phi thuong
      if (rewardMoney.value) {
        salaryAfter += Number(rewardMoney.value)
      }
      // cong them phi sua xe
      if (repairCarMoney.value) {
        salaryAfter -= Number(repairCarMoney.value)
      }
      // cong them vien phi canh sat
      if (policeBillMoney.value) {
        salaryAfter += Number(policeBillMoney.value)
      }
      // cong them phi tro cap
      if (subsidizeMoney.value) {
        salaryAfter += Number(subsidizeMoney.value)
      }

      return resultElement.innerHTML = `${salaryAfter}`
    }


    // btnElement.addEventListener('click', calculateSalary)

    // function timeToDecimal(t) {
    //   const arr = t.split(':')
    //   const dec = parseInt((arr[1] / 6) * 10, 10)

    //   return parseFloat(parseInt(arr[0], 10) + '.' + (dec < 10 ? '0' : '') + dec)
    // }

    // function calculateSalary() {
    //   const jobRank = document.getElementById("jobRank").value
    //   if (jobRank == 3) {
    //     const hoursWorked = timeToDecimal(ipnElement.value)
    //     if (!hoursWorked) {
    //       return resultElement.innerHTML = `<b><u>Nhập chính xác giờ làm việc.</u></b>`
    //     }
    //     const standardMinHour = 4
    //     const standardMaxHour = 6

    //     let salaryReceive = 0
    //     const standardPay = 6000
    //     const undertimePay = 5000
    //     const supportPay = 2000

    //     if (hoursWorked < standardMinHour) {
    //       salaryReceive = hoursWorked * undertimePay
    //     }
    //     if (hoursWorked >= standardMinHour && hoursWorked <= standardMaxHour) {
    //       salaryReceive = hoursWorked * standardPay
    //     }
    //     if (hoursWorked > standardMaxHour) {
    //       const hoursOfSupport = hoursWorked - standardMaxHour
    //       salaryReceive = (standardMaxHour * standardPay) + (hoursOfSupport * supportPay)
    //     }
    //     return resultElement.innerHTML = `Lương sẽ nhận được: <b>${salaryReceive}</b>`
    //   }

    //   if (jobRank == 1) {
    //     const hoursWorked = timeToDecimal(ipnElement.value)
    //     if (!hoursWorked) {
    //       return resultElement.innerHTML = `<b><u>Nhập chính xác giờ làm việc.</u></b>`
    //     }
    //     const standardMinHour = 4
    //     const standardMaxHour = 6

    //     let salaryReceive = 0
    //     const standardPay = 8000
    //     const undertimePay = 7000
    //     const supportPay = 2000

    //     if (hoursWorked < standardMinHour) {
    //       salaryReceive = hoursWorked * undertimePay
    //     }
    //     if (hoursWorked >= standardMinHour && hoursWorked <= standardMaxHour) {
    //       salaryReceive = hoursWorked * standardPay
    //     }
    //     if (hoursWorked > standardMaxHour) {
    //       const hoursOfSupport = hoursWorked - standardMaxHour
    //       salaryReceive = (standardMaxHour * standardPay) + (hoursOfSupport * supportPay)
    //     }
    //     return resultElement.innerHTML = `Lương sẽ nhận được: <b>${salaryReceive}</b>`
    //   }

    //   if (jobRank == 2) {
    //     return resultElement.innerHTML = `<b><u>Lương của chức vụ này đang được cập nhật.</u></b>`
    //   }
    // }
  </script>
</body>

</html>