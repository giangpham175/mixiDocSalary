<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tính Lương Bác Sĩ MixiCity</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css">
</head>

<body>
  <div class="container">
    <!-- ---------------------------- -->
    <h1 class="mt-5 mb-3">Chức vụ nhân viên:</h1>
    <div class="input-group mb-3">
      <select id="jobRank" class="browser-default custom-select">
        <option value="1" selected>Giám Đốc</option>
        <option value="2">Phó Giám Đốc</option>
        <option value="3">Bác Sĩ Trưởng</option>
        <option value="4">Bác Sĩ</option>
        <option value="5">Y Tá</option>
        <option value="6">Thực Tập Sinh</option>
        <option value="7">Thử Việc</option>
        <option value="8">Part-time</option>
      </select>
    </div>

    <!-- ---------------------------- -->
    <h1 class="mt-5 mb-3">Số giờ làm việc:</h1>
    <div class="row">
      <div class="col-6">Số giờ làm việc ca trực <b>chính thức</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="mainTime" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Số giờ làm việc ca trực <b>hỗ trợ</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="supportTime" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Số giờ làm việc ca trực <b>part-time</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="partTime" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-3">Số giờ <b>trực thay bác sĩ khác</b>:</div>
      <div class="col-3 input-group mb-3">
        <input id="replacedTime" type="number" class="form-control">
      </div>

      <div class="col-3"><b>Chức vụ</b> của bác sĩ được trực thay:</div>
      <div class="col-3 input-group mb-3">
        <select id="jobRankReplaced" class="browser-default custom-select">
          <option value="1" selected>Giám Đốc</option>
          <option value="2">Phó Giám Đốc</option>
          <option value="3">Bác Sĩ Trưởng</option>
          <option value="4">Bác Sĩ</option>
          <option value="5">Y Tá</option>
          <option value="6">Thực Tập Sinh</option>
          <option value="7">Thử Việc</option>
          <option value="8">Part-time</option>
        </select>
      </div>
    </div>

    <!-- ---------------------------- -->
    <h1 class="mt-5 mb-3">Chi phí làm việc:</h1>
    <div class="row">
      <div class="col-6">Phí <b>thưởng</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="rewardMoney" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Phí <b>sửa xe</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="repairCarMoney" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Phí <b>viện phí cảnh sát</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="policeBillMoney" type="number" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="col-6">Phí <b>trợ cấp</b>:</div>
      <div class="col-6 input-group mb-3">
        <input id="subsidizeMoney" type="number" class="form-control">
      </div>
    </div>

    <!-- ---------------------------- -->
    <button class="btn btn-primary btn-lg btn-block">Tính Lương</button>
    <p class="text-muted">Click to know that you are beautiful</p>
    <p id="result"></p>
    <p id="detail"></p>

  </div>

  <script>

    const btnElement = document.querySelector('button')
    const resultElement = document.querySelector('#result')
    const detailElement = document.querySelector('#detail')

    btnElement.addEventListener('click', calculateSalary)

    function calculateSalary() {
      const mainTime = document.querySelector('#mainTime')
      const supportTime = document.querySelector('#supportTime')
      const partTime = document.querySelector('#partTime')
      const replacedTime = document.querySelector('#replacedTime')

      const rewardMoney = document.querySelector('#rewardMoney')
      const repairCarMoney = document.querySelector('#repairCarMoney')
      const policeBillMoney = document.querySelector('#policeBillMoney')
      const subsidizeMoney = document.querySelector('#subsidizeMoney')

      const jobRank = document.getElementById("jobRank").value
      const jobRankReplaced = document.getElementById("jobRankReplaced").value

      const hospitalFund = 0.9 // meaning 10%
      const job1Salary = 2250
      const job2Salary = 2250
      const job3Salary = 2250
      const job4Salary = 2000
      const job5Salary = 1500
      const job6Salary = 1250
      const job7Salary = 1000
      const job8Salary = 0

      let mainSalary = 0
      if (jobRank == 1) {
        mainSalary = job1Salary
      } else if (jobRank == 2) {
        mainSalary = job2Salary
      } else if (jobRank == 3) {
        mainSalary = job3Salary
      } else if (jobRank == 4) {
        mainSalary = job4Salary
      } else if (jobRank == 5) {
        mainSalary = job5Salary
      } else if (jobRank == 6) {
        mainSalary = job6Salary
      } else if (jobRank == 7) {
        mainSalary = job7Salary
      } else if (jobRank == 8) {
        mainSalary = job8Salary
      } else {
        mainSalary = 0
      }

      let replaceSalaryRecieved = 0
      let role = ''
      if (jobRankReplaced == 1) {
        replaceSalaryRecieved = job1Salary
        role = 'Giám Đốc'
      } else if (jobRankReplaced == 2) {
        replaceSalaryRecieved = job2Salary
        role = 'Phó Giám Đốc'
      } else if (jobRankReplaced == 3) {
        replaceSalaryRecieved = job3Salary
        role = 'Bác Sĩ Trưởng'
      } else if (jobRankReplaced == 4) {
        replaceSalaryRecieved = job4Salary
        role = 'Bác Sĩ'
      } else if (jobRankReplaced == 5) {
        replaceSalaryRecieved = job5Salary
        role = 'Y Tá'
      } else if (jobRankReplaced == 6) {
        replaceSalaryRecieved = job6Salary
        role = 'Thực Tập Sinh'
      } else if (jobRankReplaced == 7) {
        replaceSalaryRecieved = job7Salary
        role = 'Thử Việc'
      } else if (jobRankReplaced == 8) {
        replaceSalaryRecieved = 0
        role = 'Part-time'
      } else {
        replaceSalaryRecieved = 0
        role = ''
      }

      let temporarySalary = 0
      let supportSalary = 0
      let replacedSalary = 0
      let partTimeSalary = 0

      // luong tam tinh, chua cong tru cac khoan phi khac
      if (mainTime.value != null || mainTime.value != 0) {
        temporarySalary = mainSalary * mainTime.value
      }
      // luong ho tro
      if (supportTime.value != null || supportTime.value != 0) {
        supportSalary = mainSalary * supportTime.value / 2
      }
      // luong truc thay bac si khac
      if (replacedTime.value != null || replacedTime.value != 0) {
        replacedSalary = replacedTime.value * replaceSalaryRecieved
      }
      // luong truc part-time
      if (partTime.value != null || partTime.value != 0) {
        partTimeSalary = mainSalary * partTime.value
      }

      let salaryBefore = 0
      let salaryAfter = 0
      // luong tong cua so gio lam viec truoc khi trich quy
      salaryBefore = temporarySalary + supportSalary + replacedSalary + partTimeSalary
      // luong tong cua so gio lam viec sau khi trich quy
      salaryAfter = salaryBefore * hospitalFund

      // cong them phi thuong
      if (rewardMoney.value) {
        salaryAfter += Number(rewardMoney.value)
      }
      // tru phi sua xe
      if (repairCarMoney.value) {
        salaryAfter -= Number(repairCarMoney.value)
      }
      // cong them vien phi canh sat
      if (policeBillMoney.value) {
        salaryAfter += Number(policeBillMoney.value)
      }
      // cong them phi tro cap
      if (subsidizeMoney.value) {
        salaryAfter += Number(subsidizeMoney.value)
      }

      return resultElement.innerHTML = `
      <div class="alert alert-danger" role="alert">
        Lương thực nhận của bác sĩ là: <b>${salaryAfter}</b>
      </div>
      <div class="alert alert-primary" role="alert">
        Lương trực (chưa trừ các khoản phí) là: <b>${salaryAfter}</b>
        <br>
        Lương trực hỗ trợ là: <b>${supportSalary}</b>
        <br>
        Lương trực thay bác sĩ khác (chức vụ: <b>${role}</b>) là: <b>${replacedSalary}</b>
        <br>
        Lương trực part-time là: <b>${partTimeSalary}</b>
        <br>
        Lương trực sau khi trích quỹ (10%) là: <b>${salaryAfter}</b>
        <br>
        <br>
        Phí thưởng thêm là: <b>${partTimeSalary}</b>
        <br>
        Phí sửa xe là: <b>${partTimeSalary}</b>
        <br>
        Phí viện phí cảnh sát là: <b>${partTimeSalary}</b>
        <br>
        Phí trợ cấp là: <b>${partTimeSalary}</b>
      </div>
      `
    }

  </script>
</body>

</html>